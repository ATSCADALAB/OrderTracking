"use strict";(self.webpackChunkMatech=self.webpackChunkMatech||[]).push([[405],{2405:(wa,G,g)=>{g.r(G),g.d(G,{UicomponentsModule:()=>ja});var x=g(8498),U=g(177),r=g(9417),M=g(2448),X=g(4912),P=g(5509),B=g(467),T=g(9217),w=g(5756),m=g(5686),t=g(4438),C=g(958),R=g(5794),Y=g(1413);let S=(()=>{class e{constructor(){this.refreshTab1=new Y.B,this.refreshTab1$=this.refreshTab1.asObservable()}triggerRefreshTab1(){this.refreshTab1.next()}static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var D=g(1321),_=g(2524),y=g(1918),f=g(7421),j=g(2788),c=g(1818),F=g(5484),v=g(9308);let V=(()=>{class e{constructor(a,s,o,i,d){this.repoService=a,this.toastr=s,this.dataService=o,this.dialogserve=i,this.Ref=d,this.validateControl=p=>this.dataForm?.get(p)?.invalid&&this.dataForm?.get(p)?.touched,this.hasError=(p,l)=>this.dataForm?.get(p)?.hasError(l),this.createData=p=>{this.dataForm.valid&&this.executeDataCreation(p)},this.executeDataCreation=p=>{let l={firstName:p.firstName,lastName:p.lastName,dateOfBirth:p.dateOfBirth,address:p.address,country:p.country};console.log(l),this.repoService.create("api/customers",l).subscribe(h=>{this.dialogserve.openSuccessDialog("The customer has been added successfully.").afterClosed().subscribe(b=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},h=>{this.toastr.error(h)})}}ngOnInit(){this.dataForm=new r.gE({firstName:new r.MJ("",[r.k0.required,r.k0.maxLength(60)]),lastName:new r.MJ("",[r.k0.required,r.k0.maxLength(60)]),dateOfBirth:new r.MJ(new Date),address:new r.MJ("",[r.k0.required,r.k0.maxLength(100)]),country:new r.MJ("",[r.k0.required,r.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(R.tw),t.rXU(S),t.rXU(D.o),t.rXU(_.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-add-customer"]],decls:33,vars:4,consts:[["picker",""],[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","placeholder","Choose a date of birth","formControlName","dateOfBirth","id","dateOfBirth","readonly","",3,"click","matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","address"],["matInput","","formControlName","country"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,o){if(1&s){const i=t.RV6();t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Create customer"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return t.eBV(i),t.Njj(o.closeModal())}),t.j41(6,"mat-icon",5),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",6)(9,"form",7),t.bIt("ngSubmit",function(){return t.eBV(i),t.Njj(o.createData(o.dataForm.value))}),t.j41(10,"mat-form-field",8)(11,"mat-label"),t.EFF(12,"First Name"),t.k0s(),t.nrm(13,"input",9),t.k0s(),t.j41(14,"mat-form-field",8)(15,"mat-label"),t.EFF(16,"Last Name"),t.k0s(),t.nrm(17,"input",10),t.k0s(),t.j41(18,"mat-form-field",8)(19,"input",11),t.bIt("click",function(){t.eBV(i);const p=t.sdS(22);return t.Njj(p.open())}),t.k0s(),t.nrm(20,"mat-datepicker-toggle",12)(21,"mat-datepicker",null,0),t.k0s(),t.j41(23,"mat-form-field",8)(24,"mat-label"),t.EFF(25,"Address"),t.k0s(),t.nrm(26,"input",13),t.k0s(),t.j41(27,"mat-form-field",8)(28,"mat-label"),t.EFF(29,"Country"),t.k0s(),t.nrm(30,"input",14),t.k0s(),t.j41(31,"button",15),t.EFF(32," Save "),t.k0s()()()()}if(2&s){const i=t.sdS(22);t.R7$(9),t.Y8G("formGroup",o.dataForm),t.R7$(10),t.Y8G("matDatepicker",i),t.R7$(),t.Y8G("for",i),t.R7$(11),t.Y8G("disabled",!o.dataForm.valid)}},dependencies:[y.Vh,y.bZ,y.bU,f.rl,f.nJ,f.yw,j.fg,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}return e})(),O=(()=>{class e{constructor(a,s,o,i,d,p){this.repoService=a,this.toastr=s,this.dataService=o,this.dialogserve=i,this.data=d,this.Ref=p,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,u)=>this.dataForm?.get(l)?.hasError(u),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.update(`api/customers/${this.result.id}`,{firstName:l.firstName,lastName:l.lastName,dateOfBirth:l.dateOfBirth,address:l.address,country:l.country}).subscribe(k=>{this.dialogserve.openSuccessDialog("The customer has been updated successfully.").afterClosed().subscribe($=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},k=>{this.toastr.error(k)})},this.getCustomertoUpdate=()=>{const u=`api/customers/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:h=>{this.customer={...h},this.dataForm.patchValue(this.customer)},error:h=>{this.toastr.success(h)}})}}ngOnInit(){this.dataForm=new r.gE({firstName:new r.MJ("",[r.k0.required,r.k0.maxLength(60)]),lastName:new r.MJ("",[r.k0.required,r.k0.maxLength(60)]),dateOfBirth:new r.MJ(new Date),address:new r.MJ("",[r.k0.required,r.k0.maxLength(100)]),country:new r.MJ("",[r.k0.required,r.k0.maxLength(60)])}),this.result=this.data,this.getCustomertoUpdate()}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(R.tw),t.rXU(S),t.rXU(D.o),t.rXU(_.Vh),t.rXU(_.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-update-customer"]],decls:33,vars:4,consts:[["picker",""],[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","placeholder","Choose a date of birth","formControlName","dateOfBirth","id","dateOfBirth","readonly","",3,"click","matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","address"],["matInput","","formControlName","country"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,o){if(1&s){const i=t.RV6();t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Update customer"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return t.eBV(i),t.Njj(o.closeModal())}),t.j41(6,"mat-icon",5),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",6)(9,"form",7),t.bIt("ngSubmit",function(){return t.eBV(i),t.Njj(o.createData(o.dataForm.value))}),t.j41(10,"mat-form-field",8)(11,"mat-label"),t.EFF(12,"First Name"),t.k0s(),t.nrm(13,"input",9),t.k0s(),t.j41(14,"mat-form-field",8)(15,"mat-label"),t.EFF(16,"Last Name"),t.k0s(),t.nrm(17,"input",10),t.k0s(),t.j41(18,"mat-form-field",8)(19,"input",11),t.bIt("click",function(){t.eBV(i);const p=t.sdS(22);return t.Njj(p.open())}),t.k0s(),t.nrm(20,"mat-datepicker-toggle",12)(21,"mat-datepicker",null,0),t.k0s(),t.j41(23,"mat-form-field",8)(24,"mat-label"),t.EFF(25,"Address"),t.k0s(),t.nrm(26,"input",13),t.k0s(),t.j41(27,"mat-form-field",8)(28,"mat-label"),t.EFF(29,"Country"),t.k0s(),t.nrm(30,"input",14),t.k0s(),t.j41(31,"button",15),t.EFF(32," Update "),t.k0s()()()()}if(2&s){const i=t.sdS(22);t.R7$(9),t.Y8G("formGroup",o.dataForm),t.R7$(10),t.Y8G("matDatepicker",i),t.R7$(),t.Y8G("for",i),t.R7$(11),t.Y8G("disabled",!o.dataForm.valid)}},dependencies:[y.Vh,y.bZ,y.bU,f.rl,f.nJ,f.yw,j.fg,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}return e})();var E=g(8269),N=g(6038);const L=()=>[4,6,10,20];function J(e,n){1&e&&(t.j41(0,"th",26),t.EFF(1," Action "),t.k0s())}function q(e,n){if(1&e){const a=t.RV6();t.j41(0,"td",27)(1,"button",28),t.EFF(2," Action "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",29,0)(7,"button",30),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.redirectToDetails(o.id))}),t.EFF(8," Details "),t.k0s(),t.j41(9,"button",30),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.updateCustomer(o.id))}),t.EFF(10," Edit "),t.k0s(),t.j41(11,"button",30),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.DeleteCustomer(o.id))}),t.EFF(12," Delete "),t.k0s()()()}if(2&e){const a=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",a)}}function H(e,n){1&e&&(t.j41(0,"th",31),t.EFF(1," FirstName "),t.k0s())}function z(e,n){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.firstName," ")}}function K(e,n){1&e&&(t.j41(0,"th",31),t.EFF(1," LastName "),t.k0s())}function W(e,n){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.lastName," ")}}function Z(e,n){1&e&&(t.j41(0,"th",31),t.EFF(1," DateOfBirth "),t.k0s())}function Q(e,n){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,a.dateOfBirth,"mediumDate")," ")}}function tt(e,n){1&e&&(t.j41(0,"th",31),t.EFF(1," Country "),t.k0s())}function et(e,n){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.country," ")}}function at(e,n){1&e&&(t.j41(0,"th",26),t.EFF(1," Type "),t.k0s())}function ot(e,n){1&e&&(t.j41(0,"span",34),t.EFF(1," No Account "),t.k0s())}function st(e,n){1&e&&(t.j41(0,"span",35),t.EFF(1," Beginner "),t.k0s())}function it(e,n){1&e&&(t.j41(0,"span",36),t.EFF(1," Advanced "),t.k0s())}function rt(e,n){1&e&&(t.j41(0,"span",34),t.EFF(1," Gold "),t.k0s())}function nt(e,n){1&e&&(t.j41(0,"span",37),t.EFF(1," Platinum "),t.k0s())}function lt(e,n){if(1&e&&(t.j41(0,"td",32),t.DNE(1,ot,2,0,"ng-template",33)(2,st,2,0,"ng-template",33)(3,it,2,0,"ng-template",33)(4,rt,2,0,"ng-template",33)(5,nt,2,0,"ng-template",33),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.Y8G("ngIf","0"==a.accountCount),t.R7$(),t.Y8G("ngIf","1"==a.accountCount),t.R7$(),t.Y8G("ngIf","2"==a.accountCount),t.R7$(),t.Y8G("ngIf","3"==a.accountCount),t.R7$(),t.Y8G("ngIf",+a.accountCount>=4)}}function mt(e,n){1&e&&(t.j41(0,"th",26),t.EFF(1," Status "),t.k0s())}function ct(e,n){1&e&&(t.j41(0,"span",35),t.EFF(1," Active "),t.k0s())}function dt(e,n){1&e&&(t.j41(0,"span",34),t.EFF(1," Blocked "),t.k0s())}function pt(e,n){if(1&e&&(t.j41(0,"td",32),t.DNE(1,ct,2,0,"ng-template",33)(2,dt,2,0,"ng-template",33),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.Y8G("ngIf",1==a.status),t.R7$(),t.Y8G("ngIf",0==a.status)}}function ut(e,n){1&e&&(t.j41(0,"th",26),t.EFF(1," Details "),t.k0s())}function ht(e,n){1&e&&(t.j41(0,"td",27)(1,"mat-icon",38),t.EFF(2,"remove_red_eye"),t.k0s()())}function ft(e,n){1&e&&t.nrm(0,"tr",39)}function _t(e,n){1&e&&t.nrm(0,"tr",40)}let gt=(()=>{class e{constructor(a,s,o,i,d,p){var l=this;this.repoService=a,this.router=s,this.toastr=o,this.dialog=i,this.dataService=d,this.dialogserve=p,this.displayedColumns=["action","firstName","lastName","dateOfBirth","country","type","status"],this.dataSource=new m.I6,this.doFilter=u=>{this.dataSource.filter=u.trim().toLocaleLowerCase()},this.redirectToDetails=function(){var u=(0,B.A)(function*(h){l.router.navigate([`/ui-components/customer-details/${h}`])});return function(h){return u.apply(this,arguments)}}(),this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getCustomers()})}ngOnInit(){this.getCustomers()}getCustomers(){this.repoService.getData("api/customers").subscribe(a=>{this.dataSource.data=a},a=>{console.log(a)})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}addCustomer(){this.dialog.open(V,{width:"500px",height:"545px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateCustomer(a){this.dialog.open(O,{width:"500px",height:"545px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:a}})}DeleteCustomer(a){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the customer ?").afterClosed().subscribe(s=>{s&&this.repoService.delete(`api/customers/${a}`).subscribe(i=>{this.dialogserve.openSuccessDialog("The customer has been deleted successfully.").afterClosed().subscribe(d=>{this.getCustomers()})})})}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(x.Ix),t.rXU(R.tw),t.rXU(_.bZ),t.rXU(S),t.rXU(D.o))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-lists"]],viewQuery:function(s,o){if(1&s&&(t.GBs(T.iy,5),t.GBs(w.B4,5)),2&s){let i;t.mGM(i=t.lsd())&&(o.paginator=i.first),t.mGM(i=t.lsd())&&(o.sort=i.first)}},decls:42,vars:6,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search....",3,"keyup"],[1,"table-responsive","m-t-16"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","firstName"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","lastName"],["matColumnDef","dateOfBirth"],["matColumnDef","country"],["matColumnDef","type"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","Details"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell",""],[3,"ngIf"],[1,"bg-light-warning","text-warning","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-accent","text-accent","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-primary","text-primary","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-success","text-success","rounded","f-w-600","p-6","p-y-4","f-s-12"],["color","primary"],["mat-header-row",""],["mat-row",""]],template:function(s,o){1&s&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Customers"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return o.addCustomer()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.j41(8,"span",5),t.EFF(9,"Create new customer"),t.k0s()()(),t.j41(10,"mat-card-content",6)(11,"mat-form-field",7)(12,"input",8),t.bIt("keyup",function(d){return o.doFilter(d.target.value)}),t.k0s()(),t.j41(13,"div",9)(14,"table",10),t.qex(15,11),t.DNE(16,J,2,0,"th",12)(17,q,13,1,"td",13),t.bVm(),t.qex(18,14),t.DNE(19,H,2,0,"th",15)(20,z,2,1,"td",13),t.bVm(),t.qex(21,16),t.DNE(22,K,2,0,"th",15)(23,W,2,1,"td",13),t.bVm(),t.qex(24,17),t.DNE(25,Z,2,0,"th",15)(26,Q,3,4,"td",13),t.bVm(),t.qex(27,18),t.DNE(28,tt,2,0,"th",15)(29,et,2,1,"td",13),t.bVm(),t.qex(30,19),t.DNE(31,at,2,0,"th",12)(32,lt,6,5,"td",20),t.bVm(),t.qex(33,21),t.DNE(34,mt,2,0,"th",12)(35,pt,3,2,"td",20),t.bVm(),t.qex(36,22),t.DNE(37,ut,2,0,"th",12)(38,ht,3,0,"td",13),t.bVm(),t.DNE(39,ft,1,0,"tr",23)(40,_t,1,0,"tr",24),t.k0s()(),t.nrm(41,"mat-paginator",25),t.k0s()()),2&s&&(t.R7$(14),t.Y8G("dataSource",o.dataSource),t.R7$(25),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns),t.R7$(),t.Y8G("pageSize",4)("pageSizeOptions",t.lJ4(5,L)))},dependencies:[U.bT,f.rl,j.fg,E.kk,E.fb,E.Cp,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,T.iy,w.B4,w.aE,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,N.Om,U.vh],encapsulation:2})}return e})();var bt=g(1682),A=g(1351);function Ct(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1,"Please provide a valid email"),t.k0s())}function Ft(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1,"Email is required"),t.k0s())}function kt(e,n){if(1&e){const a=t.RV6();t.j41(0,"div")(1,"mat-checkbox",15),t.bIt("change",function(o){const i=t.eBV(a).$implicit,d=t.XpG();return t.Njj(d.toggleRoleSelection(o,i.name))}),t.EFF(2),t.k0s()()}if(2&e){const a=n.$implicit,s=t.XpG();t.R7$(),t.Y8G("checked",s.isSelected(a.name)),t.R7$(),t.SpI(" ",a.name," ")}}let Dt=(()=>{class e{constructor(a,s,o,i,d,p){this.repoService=a,this.dataService=s,this.toastr=o,this.dialogserve=i,this.authService=d,this.Ref=p,this.selectedRoles=[],this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,u)=>this.dataForm?.get(l)?.hasError(u),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.authService.registerUser("api/authentication",{firstName:l.firstName,lastName:l.lastName,userName:l.userName,email:l.email,roles:this.selectedRoles}).subscribe(b=>{this.dialogserve.openSuccessDialog("The default password is sent to the user's email address").afterClosed().subscribe(k=>{this.dialogserve.openSuccessDialog("The user has been added successfully.").afterClosed().subscribe($=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})})},b=>{this.dialogserve.openErrorDialog(b.message).afterClosed().subscribe(k=>{})})}}ngOnInit(){this.dataForm=new r.gE({firstName:new r.MJ("",[r.k0.required,r.k0.maxLength(60)]),lastName:new r.MJ("",[r.k0.required,r.k0.maxLength(60)]),userName:new r.MJ("",[r.k0.required,r.k0.maxLength(60)]),email:new r.MJ("",[r.k0.required,r.k0.email])}),this.getRoles()}getRoles(){this.repoService.getData("api/roles").subscribe(a=>{this.roles=a},a=>{this.toastr.success(a)})}isSelected(a){return this.selectedRoles.includes(a)}toggleRoleSelection(a,s){a.checked?this.selectedRoles.push(s):this.selectedRoles=this.selectedRoles.filter(o=>o!==s)}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(S),t.rXU(R.tw),t.rXU(D.o),t.rXU(bt.k),t.rXU(_.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-add-user"]],decls:33,vars:5,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","userName"],["matInput","","type","email","formControlName","email"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled"],[3,"change","checked"]],template:function(s,o){1&s&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create user"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return o.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return o.createData(o.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"First Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"mat-form-field",7)(15,"mat-label"),t.EFF(16,"Last Name"),t.k0s(),t.nrm(17,"input",9),t.k0s(),t.j41(18,"mat-form-field",7)(19,"mat-label"),t.EFF(20,"User Name"),t.k0s(),t.nrm(21,"input",10),t.k0s(),t.j41(22,"mat-form-field",7)(23,"mat-label"),t.EFF(24,"Email"),t.k0s(),t.nrm(25,"input",11),t.DNE(26,Ct,2,0,"mat-error",12)(27,Ft,2,0,"mat-error",12),t.k0s(),t.j41(28,"mat-label"),t.EFF(29,"Roles"),t.k0s(),t.DNE(30,kt,3,2,"div",13),t.j41(31,"button",14),t.EFF(32," Save "),t.k0s()()()()),2&s&&(t.R7$(9),t.Y8G("formGroup",o.dataForm),t.R7$(17),t.Y8G("ngIf",o.validateControl("email")&&o.hasError("email","email")),t.R7$(),t.Y8G("ngIf",o.validateControl("email")&&o.hasError("email","required")),t.R7$(3),t.Y8G("ngForOf",o.roles),t.R7$(),t.Y8G("disabled",!o.dataForm.valid))},dependencies:[U.Sq,U.bT,A.So,f.rl,f.nJ,f.TL,j.fg,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}return e})();function Rt(e,n){if(1&e){const a=t.RV6();t.j41(0,"div")(1,"mat-checkbox",14),t.bIt("change",function(o){const i=t.eBV(a).$implicit,d=t.XpG();return t.Njj(d.toggleRoleSelection(o,i.name))}),t.EFF(2),t.k0s()()}if(2&e){const a=n.$implicit,s=t.XpG();t.R7$(),t.Y8G("checked",s.isSelected(a.name)),t.R7$(),t.SpI(" ",a.name," ")}}let vt=(()=>{class e{constructor(a,s,o,i,d,p){this.repoService=a,this.dataService=s,this.toastr=o,this.dialogserve=i,this.data=d,this.Ref=p,this.selectedRoles=[],this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,u)=>this.dataForm?.get(l)?.hasError(u),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.update(`api/users/${this.result.id}`,{firstName:l.firstName,lastName:l.lastName,userName:l.userName,email:l.email,roles:this.selectedRoles}).subscribe(k=>{this.dialogserve.openSuccessDialog("The user has been updated successfully.").afterClosed().subscribe($=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},k=>{this.toastr.error(k),this.Ref.close([])})},this.getUsertoUpdate=()=>{const u=`api/users/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:h=>{this.user={...h},this.dataForm.patchValue(this.user),this.selectedRoles=this.user.roles},error:h=>{this.toastr.error(h)}})}}ngOnInit(){this.dataForm=new r.gE({firstName:new r.MJ("",[r.k0.required,r.k0.maxLength(60)]),lastName:new r.MJ("",[r.k0.required,r.k0.maxLength(60)]),userName:new r.MJ("",[r.k0.required,r.k0.maxLength(60)]),email:new r.MJ("",[r.k0.required,r.k0.maxLength(100)])}),this.getRoles(),this.result=this.data,this.getUsertoUpdate()}getRoles(){this.repoService.getData("api/roles").subscribe(a=>{this.roles=a},a=>{this.toastr.error(a)})}toggleRoleSelection(a,s){a.checked?this.selectedRoles.push(s):this.selectedRoles=this.selectedRoles.filter(o=>o!==s)}closeModal(){this.Ref.close([])}isSelected(a){return this.selectedRoles.includes(a)}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(S),t.rXU(R.tw),t.rXU(D.o),t.rXU(_.Vh),t.rXU(_.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-update-user"]],decls:31,vars:3,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","userName"],["matInput","","formControlName","email"],[4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled"],[3,"change","checked"]],template:function(s,o){1&s&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Update user"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return o.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return o.createData(o.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"First Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"mat-form-field",7)(15,"mat-label"),t.EFF(16,"Last Name"),t.k0s(),t.nrm(17,"input",9),t.k0s(),t.j41(18,"mat-form-field",7)(19,"mat-label"),t.EFF(20,"User Name"),t.k0s(),t.nrm(21,"input",10),t.k0s(),t.j41(22,"mat-form-field",7)(23,"mat-label"),t.EFF(24,"Email"),t.k0s(),t.nrm(25,"input",11),t.k0s(),t.j41(26,"mat-label"),t.EFF(27,"Roles"),t.k0s(),t.DNE(28,Rt,3,2,"div",12),t.j41(29,"button",13),t.EFF(30," Save "),t.k0s()()()()),2&s&&(t.R7$(9),t.Y8G("formGroup",o.dataForm),t.R7$(19),t.Y8G("ngForOf",o.roles),t.R7$(),t.Y8G("disabled",!o.dataForm.valid))},dependencies:[U.Sq,A.So,f.rl,f.nJ,j.fg,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}return e})();const St=()=>[4,6,10,20];function Ut(e,n){1&e&&(t.j41(0,"th",25),t.EFF(1," Action "),t.k0s())}function Et(e,n){if(1&e){const a=t.RV6();t.j41(0,"td",26)(1,"button",27),t.EFF(2," Action"),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",28,0)(7,"button",29),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.updateUser(o.id))}),t.EFF(8," Edit "),t.k0s(),t.j41(9,"button",29),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.DeleteUser(o.id))}),t.EFF(10," Delete "),t.k0s()()()}if(2&e){const a=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",a)}}function jt(e,n){1&e&&(t.j41(0,"th",30),t.EFF(1," User Name "),t.k0s())}function wt(e,n){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.userName," ")}}function Tt(e,n){1&e&&(t.j41(0,"th",30),t.EFF(1," First Name "),t.k0s())}function yt(e,n){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.firstName," ")}}function $t(e,n){1&e&&(t.j41(0,"th",30),t.EFF(1," Last Name "),t.k0s())}function Nt(e,n){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.lastName," ")}}function xt(e,n){1&e&&(t.j41(0,"th",25),t.EFF(1," Roles "),t.k0s())}function It(e,n){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.roles," ")}}function At(e,n){1&e&&(t.j41(0,"th",30),t.EFF(1," Email "),t.k0s())}function Gt(e,n){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.email," ")}}function Mt(e,n){1&e&&(t.j41(0,"th",25),t.EFF(1," Email confirm "),t.k0s())}function Xt(e,n){1&e&&(t.j41(0,"span",33),t.EFF(1," Yes "),t.k0s())}function Pt(e,n){1&e&&(t.j41(0,"span",34),t.EFF(1," No "),t.k0s())}function Bt(e,n){if(1&e&&(t.j41(0,"td",31),t.DNE(1,Xt,2,0,"ng-template",32)(2,Pt,2,0,"ng-template",32),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.Y8G("ngIf","True"==a.emailConfirmed),t.R7$(),t.Y8G("ngIf","False"==a.emailConfirmed)}}function Yt(e,n){1&e&&t.nrm(0,"tr",35)}function Vt(e,n){1&e&&t.nrm(0,"tr",36)}let Ot=(()=>{class e{constructor(a,s,o,i){this.repoService=a,this.dialog=s,this.dialogserve=o,this.dataService=i,this.displayedColumns=["action","username","name","surname","roles","email","emailconfirm"],this.dataSource=new m.I6,this.doFilter=d=>{this.dataSource.filter=d.trim().toLocaleLowerCase()},this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getUsers()})}ngOnInit(){this.getUsers()}getUsers(){this.repoService.getData("api/users").subscribe(a=>{this.dataSource.data=a},a=>{console.log(a)})}addUser(){this.dialog.open(Dt,{width:"500px",height:"570px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateUser(a){this.dialog.open(vt,{width:"500px",height:"567px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:a}})}DeleteUser(a){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the user ?").afterClosed().subscribe(s=>{s&&this.repoService.delete(`api/users/${a}`).subscribe(i=>{this.dialogserve.openSuccessDialog("The user has been deleted successfully.").afterClosed().subscribe(d=>{this.getUsers()})})})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(_.bZ),t.rXU(D.o),t.rXU(S))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-users"]],viewQuery:function(s,o){if(1&s&&(t.GBs(T.iy,5),t.GBs(w.B4,5)),2&s){let i;t.mGM(i=t.lsd())&&(o.paginator=i.first),t.mGM(i=t.lsd())&&(o.sort=i.first)}},decls:39,vars:6,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search....",3,"keyup"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","username"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","surname"],["matColumnDef","roles"],["matColumnDef","email"],["matColumnDef","emailconfirm"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell",""],[3,"ngIf"],[1,"bg-light-accent","text-accent","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-warning","text-warning","rounded","f-w-600","p-6","p-y-4","f-s-12"],["mat-header-row",""],["mat-row",""]],template:function(s,o){1&s&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Users"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return o.addUser()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.j41(8,"span",5),t.EFF(9,"Create new user"),t.k0s()()(),t.j41(10,"mat-card-content",6)(11,"div",7)(12,"mat-form-field",8)(13,"input",9),t.bIt("keyup",function(d){return o.doFilter(d.target.value)}),t.k0s()(),t.j41(14,"table",10),t.qex(15,11),t.DNE(16,Ut,2,0,"th",12)(17,Et,11,1,"td",13),t.bVm(),t.qex(18,14),t.DNE(19,jt,2,0,"th",15)(20,wt,2,1,"td",13),t.bVm(),t.qex(21,16),t.DNE(22,Tt,2,0,"th",15)(23,yt,2,1,"td",13),t.bVm(),t.qex(24,17),t.DNE(25,$t,2,0,"th",15)(26,Nt,2,1,"td",13),t.bVm(),t.qex(27,18),t.DNE(28,xt,2,0,"th",12)(29,It,2,1,"td",13),t.bVm(),t.qex(30,19),t.DNE(31,At,2,0,"th",15)(32,Gt,2,1,"td",13),t.bVm(),t.qex(33,20),t.DNE(34,Mt,2,0,"th",12)(35,Bt,3,2,"td",21),t.bVm(),t.DNE(36,Yt,1,0,"tr",22)(37,Vt,1,0,"tr",23),t.k0s()(),t.nrm(38,"mat-paginator",24),t.k0s()()),2&s&&(t.R7$(14),t.Y8G("dataSource",o.dataSource),t.R7$(22),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns),t.R7$(),t.Y8G("pageSize",4)("pageSizeOptions",t.lJ4(5,St)))},dependencies:[U.bT,f.rl,j.fg,E.kk,E.fb,E.Cp,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,T.iy,w.B4,w.aE,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,N.Om],encapsulation:2})}return e})(),Lt=(()=>{class e{constructor(a,s,o,i,d,p){this.repoService=a,this.toastr=s,this.dataService=o,this.dialogserve=i,this.data=d,this.Ref=p,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,u)=>this.dataForm?.get(l)?.hasError(u),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.update(`api/roles/${this.result.id}`,{name:l.name}).subscribe(k=>{this.dialogserve.openSuccessDialog("The role has been updated successfully.").afterClosed().subscribe($=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},k=>{this.toastr.error(k),this.Ref.close([])})},this.getRoletoUpdate=()=>{const u=`api/roles/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:h=>{this.role={...h},this.dataForm.patchValue(this.role)},error:h=>{this.toastr.success(h)}})}}ngOnInit(){this.dataForm=new r.gE({name:new r.MJ("",[r.k0.required,r.k0.maxLength(60)])}),this.result=this.data,this.getRoletoUpdate()}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(R.tw),t.rXU(S),t.rXU(D.o),t.rXU(_.Vh),t.rXU(_.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-update-role"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,o){1&s&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Update role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return o.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return o.createData(o.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&s&&(t.R7$(9),t.Y8G("formGroup",o.dataForm),t.R7$(5),t.Y8G("disabled",!o.dataForm.valid))},dependencies:[f.rl,f.nJ,j.fg,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}return e})(),Jt=(()=>{class e{constructor(a,s,o,i,d){this.repoService=a,this.toastr=s,this.dataService=o,this.dialogserve=i,this.Ref=d,this.validateControl=p=>this.dataForm?.get(p)?.invalid&&this.dataForm?.get(p)?.touched,this.hasError=(p,l)=>this.dataForm?.get(p)?.hasError(l),this.createData=p=>{this.dataForm.valid&&this.executeDataCreation(p)},this.executeDataCreation=p=>{this.repoService.create("api/roles",{name:p.name}).subscribe(h=>{this.dialogserve.openSuccessDialog("The role has been added successfully.").afterClosed().subscribe(b=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},h=>{this.toastr.error(h),this.Ref.close([])})}}ngOnInit(){this.dataForm=new r.gE({name:new r.MJ("",[r.k0.required,r.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(R.tw),t.rXU(S),t.rXU(D.o),t.rXU(_.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-add-role"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,o){1&s&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return o.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return o.createData(o.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&s&&(t.R7$(9),t.Y8G("formGroup",o.dataForm),t.R7$(5),t.Y8G("disabled",!o.dataForm.valid))},dependencies:[f.rl,f.nJ,j.fg,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}return e})();var qt=g(8661);function Ht(e,n){1&e&&(t.j41(0,"th",17),t.EFF(1,"Category"),t.k0s())}function zt(e,n){if(1&e&&(t.j41(0,"td",18)(1,"span",19),t.EFF(2),t.k0s()()),2&e){const a=n.$implicit;t.R7$(2),t.JRh(a.name)}}function Kt(e,n){if(1&e&&(t.j41(0,"th",17),t.EFF(1),t.k0s()),2&e){const a=t.XpG().$implicit;t.R7$(),t.JRh(a.name)}}function Wt(e,n){if(1&e){const a=t.RV6();t.j41(0,"mat-checkbox",22),t.mxI("ngModelChange",function(o){t.eBV(a);const i=t.XpG().$implicit,d=t.XpG().$implicit,p=t.XpG();return t.DH7(p.permissionAssignments[i.id][d.id],o)||(p.permissionAssignments[i.id][d.id]=o),t.Njj(o)}),t.k0s()}if(2&e){const a=t.XpG().$implicit,s=t.XpG().$implicit,o=t.XpG();t.R50("ngModel",o.permissionAssignments[a.id][s.id])}}function Zt(e,n){if(1&e&&(t.j41(0,"td",18),t.DNE(1,Wt,1,1,"mat-checkbox",21),t.k0s()),2&e){const a=n.$implicit,s=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",a.id&&s.id)}}function Qt(e,n){if(1&e&&(t.qex(0,20),t.DNE(1,Kt,2,1,"th",7)(2,Zt,2,1,"td",8),t.bVm()),2&e){let a;t.Y8G("matColumnDef",null!==(a=n.$implicit.name)&&void 0!==a?a:"unknown")}}function te(e,n){1&e&&t.nrm(0,"tr",23)}function ee(e,n){1&e&&t.nrm(0,"tr",24)}function ae(e,n){1&e&&t.nrm(0,"mat-spinner",25)}function oe(e,n){1&e&&(t.j41(0,"span"),t.EFF(1,"Save Permissions"),t.k0s())}let se=(()=>{class e{constructor(a,s,o){this.repoService=a,this.dialogRef=s,this.data=o,this.categories=[],this.permissions=[],this.rolePermissions=[],this.permissionAssignments={},this.displayedColumns=[],this.isSaving=!1,this.roleId=o.roleId}ngOnInit(){this.loadCategories(),this.loadPermissions(),this.loadRolePermissions()}loadCategories(){this.repoService.getData("api/categories").subscribe({next:a=>{this.categories=a,this.initializeAssignments()},error:a=>{console.error("Error loading categories:",a),alert("Failed to load categories")}})}loadPermissions(){this.repoService.getData("api/permissions").subscribe({next:a=>{const s=a;this.permissions=s,this.displayedColumns=["category",...s.map(o=>o.name??"")],this.initializeAssignments()},error:a=>{console.error("Error loading permissions:",a),alert("Failed to load permissions")}})}loadRolePermissions(){console.log("Role ID:",this.roleId),this.repoService.getData(`api/rolepermissions/role/${this.roleId}`).subscribe({next:a=>{this.rolePermissions=a,this.initializeAssignments()},error:a=>{console.error("Error loading role permissions:",a),alert("Failed to load role permissions")}})}initializeAssignments(){0===this.categories.length||0===this.permissions.length||(this.permissionAssignments={},this.categories.forEach(a=>{a.id&&(this.permissionAssignments[a.id]={}),this.permissions.forEach(s=>{const o=this.rolePermissions.some(i=>i.categoryId===a.id&&i.permissionId===s.id);a.id&&s.id&&(this.permissionAssignments[a.id][s.id]=o)})}))}savePermissions(){this.isSaving=!0;const a={roleId:this.roleId,categoryAssignments:[]};this.categories.forEach(s=>{const o=this.permissions.filter(i=>s.id&&i.id&&this.permissionAssignments[s.id][i.id]).map(i=>i.id);if(o.length>0&&s.id){const i={categoryId:s.id,permissionIds:o.filter(d=>!!d)};a.categoryAssignments.push(i)}}),this.repoService.create("api/rolepermissions/assign",a).subscribe({next:()=>{alert("Permissions assigned successfully"),this.isSaving=!1,this.dialogRef.close(!0)},error:s=>{console.error("Error assigning permissions:",s),this.isSaving=!1,alert("Failed to assign permissions")}})}closeModal(){this.dialogRef.close()}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(_.CP),t.rXU(_.Vh))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-assign-permissions"]],decls:20,vars:7,consts:[[1,"modal-card"],[1,"header"],[1,"spacer"],[1,"content"],[1,"table-container"],["mat-table","",1,"permission-table",3,"dataSource"],["matColumnDef","category"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","permission-row",4,"matRowDef","matRowDefColumns"],[1,"actions"],["mat-flat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],["diameter","20",4,"ngIf"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"category-name"],[3,"matColumnDef"],["color","primary","class","permission-checkbox",3,"ngModel","ngModelChange",4,"ngIf"],["color","primary",1,"permission-checkbox",3,"ngModelChange","ngModel"],["mat-header-row",""],["mat-row","",1,"permission-row"],["diameter","20"]],template:function(s,o){1&s&&(t.j41(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title"),t.EFF(3,"Assign Permissions"),t.k0s(),t.nrm(4,"span",2),t.k0s(),t.j41(5,"mat-card-content",3)(6,"div",4)(7,"table",5),t.qex(8,6),t.DNE(9,Ht,2,0,"th",7)(10,zt,3,1,"td",8),t.bVm(),t.DNE(11,Qt,3,1,"ng-container",9)(12,te,1,0,"tr",10)(13,ee,1,0,"tr",11),t.k0s()(),t.j41(14,"div",12)(15,"button",13),t.bIt("click",function(){return o.closeModal()}),t.EFF(16,"Cancel"),t.k0s(),t.j41(17,"button",14),t.bIt("click",function(){return o.savePermissions()}),t.DNE(18,ae,1,0,"mat-spinner",15)(19,oe,2,0,"span",16),t.k0s()()()()),2&s&&(t.R7$(7),t.Y8G("dataSource",o.categories),t.R7$(4),t.Y8G("ngForOf",o.permissions),t.R7$(),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns),t.R7$(4),t.Y8G("disabled",o.isSaving),t.R7$(),t.Y8G("ngIf",o.isSaving),t.R7$(),t.Y8G("ngIf",!o.isSaving))},dependencies:[U.Sq,U.bT,A.So,c.RN,c.m2,c.MM,c.dh,F.$z,qt.LG,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,r.BC,r.vS],styles:[".modal-card[_ngcontent-%COMP%]{width:700px;max-height:80vh;border-radius:8px;box-shadow:0 4px 12px #00000026}.header[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:16px;border-bottom:1px solid #e0e0e0}.header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#333}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.content[_ngcontent-%COMP%]{padding:24px;overflow-y:auto}.table-container[_ngcontent-%COMP%]{margin-bottom:24px;max-height:400px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:4px}.permission-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.permission-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .permission-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:center;border-bottom:1px solid #e0e0e0}.permission-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600;color:#555;position:sticky;top:0;z-index:1}.permission-row[_ngcontent-%COMP%]:hover{background-color:#f9f9f9;cursor:pointer}.category-name[_ngcontent-%COMP%]{font-weight:500;color:#333}.permission-checkbox[_ngcontent-%COMP%]{transition:transform .2s ease}.permission-checkbox[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:4px}.actions[_ngcontent-%COMP%]   button[mat-flat-button][_ngcontent-%COMP%]{font-weight:500}.actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:disabled{background-color:#ccc}mat-spinner[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin-right:8px}"]})}return e})();function ie(e,n){1&e&&(t.j41(0,"th",14),t.EFF(1," Action "),t.k0s())}function re(e,n){if(1&e){const a=t.RV6();t.j41(0,"td",15)(1,"button",16),t.EFF(2," Action "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",17,0)(7,"button",18),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.updateRole(o.id))}),t.EFF(8," Edit "),t.k0s(),t.j41(9,"button",18),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.assignPermissions(o.id))}),t.EFF(10," Assign Permissions "),t.k0s(),t.j41(11,"button",18),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.deleteRole(o.id))}),t.EFF(12," Delete "),t.k0s()()()}if(2&e){const a=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",a)}}function ne(e,n){1&e&&(t.j41(0,"th",14),t.EFF(1," Role Name "),t.k0s())}function le(e,n){if(1&e&&(t.j41(0,"td",15),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.name," ")}}function me(e,n){1&e&&(t.j41(0,"th",14),t.EFF(1," Creation time "),t.k0s())}function ce(e,n){if(1&e&&(t.j41(0,"td",15),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,a.dateCreated,"medium")," ")}}function de(e,n){1&e&&t.nrm(0,"tr",19)}function pe(e,n){1&e&&t.nrm(0,"tr",20)}let ue=(()=>{class e{constructor(a,s,o,i,d){this.repoService=a,this.dialog=s,this.toastr=o,this.dataService=i,this.dialogserve=d,this.displayedColumns=["action","role","date"],this.dataSource=new m.I6,this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getRoles()})}ngOnInit(){this.getRoles()}getRoles(){this.repoService.getData("api/roles").subscribe({next:a=>{this.dataSource.data=a},error:a=>{console.error("Error loading roles:",a),this.toastr.error("Failed to load roles")}})}addRole(){this.dialog.open(Jt,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateRole(a){this.dialog.open(Lt,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:a}})}assignPermissions(a){this.dialog.open(se,{width:"700px",maxHeight:"80vh",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{roleId:a}}).afterClosed().subscribe(o=>{o&&this.getRoles()})}deleteRole(a){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the role?").afterClosed().subscribe(s=>{s&&this.repoService.delete(`api/roles/${a}`).subscribe({next:()=>{this.dialogserve.openSuccessDialog("The role has been deleted successfully.").afterClosed().subscribe(()=>{this.getRoles()})},error:i=>{console.error("Error deleting role:",i),this.toastr.error("Failed to delete role")}})})}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(_.bZ),t.rXU(R.tw),t.rXU(S),t.rXU(D.o))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-roles"]],decls:19,vars:3,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,o){1&s&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Roles"),t.k0s(),t.nrm(4,"span",3),t.k0s(),t.j41(5,"mat-card-content",4)(6,"div",5)(7,"table",6),t.qex(8,7),t.DNE(9,ie,2,0,"th",8)(10,re,13,1,"td",9),t.bVm(),t.qex(11,10),t.DNE(12,ne,2,0,"th",8)(13,le,2,1,"td",9),t.bVm(),t.qex(14,11),t.DNE(15,me,2,0,"th",8)(16,ce,3,4,"td",9),t.bVm(),t.DNE(17,de,1,0,"tr",12)(18,pe,1,0,"tr",13),t.k0s()()()()),2&s&&(t.R7$(7),t.Y8G("dataSource",o.dataSource),t.R7$(10),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns))},dependencies:[E.kk,E.fb,E.Cp,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,U.vh],encapsulation:2})}return e})();const he=()=>[4,6,10,20];function fe(e,n){1&e&&(t.j41(0,"th",18),t.EFF(1," Entity "),t.k0s())}function _e(e,n){if(1&e&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.entityName," ")}}function ge(e,n){1&e&&(t.j41(0,"th",20),t.EFF(1," Action "),t.k0s())}function be(e,n){if(1&e&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.action," ")}}function Ce(e,n){1&e&&(t.j41(0,"th",18),t.EFF(1," Creation time "),t.k0s())}function Fe(e,n){if(1&e&&(t.j41(0,"td",19),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,a.timestamp,"medium")," ")}}function ke(e,n){1&e&&(t.j41(0,"th",20),t.EFF(1," Changes "),t.k0s())}function De(e,n){if(1&e&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.changes," ")}}function Re(e,n){1&e&&t.nrm(0,"tr",21)}function ve(e,n){1&e&&t.nrm(0,"tr",22)}let Se=(()=>{class e{constructor(a){this.repoService=a,this.displayedColumns=["name","action","date","change"],this.dataSource=new m.I6}ngOnInit(){this.getRoles()}getRoles(){this.repoService.getData("api/audits").subscribe(a=>{this.dataSource.data=a},a=>{console.log(a)})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}refresh(){this.getRoles()}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-audits"]],viewQuery:function(s,o){if(1&s&&(t.GBs(T.iy,5),t.GBs(w.B4,5)),2&s){let i;t.mGM(i=t.lsd())&&(o.paginator=i.first),t.mGM(i=t.lsd())&&(o.sort=i.first)}},decls:28,vars:6,consts:[[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","accent","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["matColumnDef","date"],["matColumnDef","change"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-header-row",""],["mat-row",""]],template:function(s,o){1&s&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Audit logs"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return o.refresh()}),t.j41(6,"span",4),t.EFF(7,"Refresh"),t.k0s(),t.j41(8,"mat-icon"),t.EFF(9,"refresh"),t.k0s()()(),t.j41(10,"mat-card-content",5)(11,"div",6)(12,"table",7),t.qex(13,8),t.DNE(14,fe,2,0,"th",9)(15,_e,2,1,"td",10),t.bVm(),t.qex(16,11),t.DNE(17,ge,2,0,"th",12)(18,be,2,1,"td",10),t.bVm(),t.qex(19,13),t.DNE(20,Ce,2,0,"th",9)(21,Fe,3,4,"td",10),t.bVm(),t.qex(22,14),t.DNE(23,ke,2,0,"th",12)(24,De,2,1,"td",10),t.bVm(),t.DNE(25,Re,1,0,"tr",15)(26,ve,1,0,"tr",16),t.k0s()(),t.nrm(27,"mat-paginator",17),t.k0s()()),2&s&&(t.R7$(12),t.Y8G("dataSource",o.dataSource),t.R7$(13),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns),t.R7$(),t.Y8G("pageSize",4)("pageSizeOptions",t.lJ4(5,he)))},dependencies:[c.RN,c.m2,c.MM,c.dh,F.$z,v.An,T.iy,w.B4,w.aE,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,N.Om,U.vh],encapsulation:2})}return e})(),Ue=(()=>{class e{constructor(a,s,o,i,d,p){this.repoService=a,this.toastr=s,this.dataService=o,this.dialogserve=i,this.data=d,this.Ref=p,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,u)=>this.dataForm?.get(l)?.hasError(u),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.create(`api/customers/${this.result.id}/accounts`,{accountType:l.accountType}).subscribe(k=>{this.dialogserve.openSuccessDialog("The account has been added successfully.").afterClosed().subscribe($=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},k=>{this.toastr.error(k)})}}ngOnInit(){this.dataForm=new r.gE({accountType:new r.MJ("",[r.k0.required,r.k0.maxLength(60)])}),this.result=this.data}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(R.tw),t.rXU(S),t.rXU(D.o),t.rXU(_.Vh),t.rXU(_.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-add-account"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","accountType"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,o){1&s&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create Account"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return o.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return o.createData(o.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Account type"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&s&&(t.R7$(9),t.Y8G("formGroup",o.dataForm),t.R7$(5),t.Y8G("disabled",!o.dataForm.valid))},dependencies:[f.rl,f.nJ,j.fg,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}return e})();var I=g(2608);function Ee(e,n){if(1&e){const a=t.RV6();t.j41(0,"div",13)(1,"mat-card",7)(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4),t.k0s()(),t.j41(5,"mat-card-content",4)(6,"mat-list")(7,"mat-list-item")(8,"span",8),t.EFF(9,"Created"),t.k0s(),t.j41(10,"span",9),t.EFF(11),t.nI1(12,"date"),t.k0s()()(),t.j41(13,"button",14),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.DeleteCustomer(o.id))}),t.EFF(14," Delete "),t.k0s()()()()}if(2&e){const a=n.$implicit;t.R7$(4),t.SpI("Account: ",a.accountType,""),t.R7$(7),t.JRh(t.i5U(12,2,a.dateCreated,"medium"))}}let je=(()=>{class e{constructor(a,s,o,i,d){this.repoService=a,this.router=s,this.dialog=o,this.dialogserve=i,this.activeRoute=d}ngOnInit(){this.getCustomer(),this.getCustomerAccount()}getCustomer(){this.repoService.getData(`api/customers/${this.activeRoute.snapshot.params.id}`).subscribe(s=>{this.customer=s},s=>{this.dialogserve.openErrorDialog(s).afterClosed().subscribe(o=>{this.router.navigate(["/ui-components/lists"])})})}getCustomerAccount(){this.repoService.getData(`api/customers/${this.activeRoute.snapshot.params.id}/accounts`).subscribe(s=>{this.accounts=s},s=>{})}addAccount(a){this.dialog.open(Ue,{width:"500px",height:"270px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:a}})}DeleteCustomer(a){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the account ?").afterClosed().subscribe(s=>{s&&this.repoService.delete(`api/customers/${this.activeRoute.snapshot.params.id}/accounts/${a}`).subscribe(d=>{this.getCustomer()})})}close(){this.router.navigate(["/ui-components/lists"])}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(x.Ix),t.rXU(_.bZ),t.rXU(D.o),t.rXU(x.nX))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-details"]],decls:60,vars:9,consts:[[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],[1,"b-t-1"],[1,"row"],[1,"col-lg-6"],[1,"b-1","shadow-none"],["matListItemTitle","",1,"f-s-16","f-w-600"],["matListItemLine","",1,"mat-body-1"],[1,"col-12"],["fxHide.xs",""],["class","col-sm-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-sm-6","col-lg-4"],["mat-flat-button","","color","warn",1,"m-t-8",3,"click"]],template:function(s,o){1&s&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Customer details"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return o.close()}),t.j41(6,"mat-icon"),t.EFF(7,"close"),t.k0s(),t.EFF(8," Close "),t.k0s()(),t.j41(9,"mat-card-content",4)(10,"div",5)(11,"div",6)(12,"mat-card",7)(13,"mat-card-header")(14,"mat-card-title"),t.EFF(15,"Basic information"),t.k0s()(),t.j41(16,"mat-card-content",4)(17,"mat-list")(18,"mat-list-item")(19,"span",8),t.EFF(20,"Full Name"),t.k0s(),t.j41(21,"span",9),t.EFF(22),t.k0s()(),t.j41(23,"mat-list-item")(24,"span",8),t.EFF(25,"Date of birth"),t.k0s(),t.j41(26,"span",9),t.EFF(27),t.nI1(28,"date"),t.k0s()()()()()(),t.j41(29,"div",6)(30,"mat-card",7)(31,"mat-card-header")(32,"mat-card-title"),t.EFF(33,"Address"),t.k0s()(),t.j41(34,"mat-card-content",4)(35,"mat-list")(36,"mat-list-item")(37,"span",8),t.EFF(38,"Resident address"),t.k0s(),t.j41(39,"span",9),t.EFF(40),t.k0s()(),t.j41(41,"mat-list-item")(42,"span",8),t.EFF(43,"Country"),t.k0s(),t.j41(44,"span",9),t.EFF(45),t.k0s()()()()()(),t.j41(46,"div",10)(47,"mat-card",7)(48,"mat-card-header")(49,"mat-card-title"),t.EFF(50),t.k0s(),t.nrm(51,"span",2),t.j41(52,"button",3),t.bIt("click",function(){return o.addAccount(o.customer.id)}),t.j41(53,"mat-icon"),t.EFF(54,"add"),t.k0s(),t.j41(55,"span",11),t.EFF(56,"Create new account "),t.k0s()()(),t.j41(57,"mat-card-content",4)(58,"div",5),t.DNE(59,Ee,15,5,"div",12),t.k0s()()()()()()()),2&s&&(t.R7$(22),t.Lme("",null==o.customer?null:o.customer.firstName," ",null==o.customer?null:o.customer.lastName,""),t.R7$(5),t.JRh(t.bMT(28,7,null==o.customer?null:o.customer.dateOfBirth)),t.R7$(13),t.JRh(null==o.customer?null:o.customer.address),t.R7$(5),t.JRh(null==o.customer?null:o.customer.country),t.R7$(5),t.SpI("Accounts (",null==o.customer?null:o.customer.accountCount,")"),t.R7$(9),t.Y8G("ngForOf",o.accounts))},dependencies:[U.Sq,c.RN,c.m2,c.MM,c.dh,I.jt,I.YE,I.C_,I.yE,F.$z,v.An,N.Om,U.vh],encapsulation:2})}return e})(),we=(()=>{class e{constructor(a,s,o,i,d,p){this.repoService=a,this.toastr=s,this.dataService=o,this.dialogserve=i,this.data=d,this.Ref=p,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,u)=>this.dataForm?.get(l)?.hasError(u),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.update(`api/categories/${this.result.id}`,{name:l.name}).subscribe(k=>{this.dialogserve.openSuccessDialog("The role has been updated successfully.").afterClosed().subscribe($=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},k=>{this.toastr.error(k),this.Ref.close([])})},this.getRoletoUpdate=()=>{const u=`api/categories/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:h=>{this.role={...h},this.dataForm.patchValue(this.role)},error:h=>{this.toastr.success(h)}})}}ngOnInit(){this.dataForm=new r.gE({name:new r.MJ("",[r.k0.required,r.k0.maxLength(60)])}),this.result=this.data,this.getRoletoUpdate()}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(R.tw),t.rXU(S),t.rXU(D.o),t.rXU(_.Vh),t.rXU(_.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-update-category"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,o){1&s&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Update role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return o.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return o.createData(o.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&s&&(t.R7$(9),t.Y8G("formGroup",o.dataForm),t.R7$(5),t.Y8G("disabled",!o.dataForm.valid))},dependencies:[f.rl,f.nJ,j.fg,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}return e})(),Te=(()=>{class e{constructor(a,s,o,i,d){this.repoService=a,this.toastr=s,this.dataService=o,this.dialogserve=i,this.Ref=d,this.validateControl=p=>this.dataForm?.get(p)?.invalid&&this.dataForm?.get(p)?.touched,this.hasError=(p,l)=>this.dataForm?.get(p)?.hasError(l),this.createData=p=>{this.dataForm.valid&&this.executeDataCreation(p)},this.executeDataCreation=p=>{this.repoService.create("api/categories",{name:p.name}).subscribe(h=>{this.dialogserve.openSuccessDialog("The role has been added successfully.").afterClosed().subscribe(b=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},h=>{this.toastr.error(h),this.Ref.close([])})}}ngOnInit(){this.dataForm=new r.gE({name:new r.MJ("",[r.k0.required,r.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(R.tw),t.rXU(S),t.rXU(D.o),t.rXU(_.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-add-category"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,o){1&s&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return o.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return o.createData(o.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&s&&(t.R7$(9),t.Y8G("formGroup",o.dataForm),t.R7$(5),t.Y8G("disabled",!o.dataForm.valid))},dependencies:[f.rl,f.nJ,j.fg,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}return e})();function ye(e,n){1&e&&(t.j41(0,"th",13),t.EFF(1," Action "),t.k0s())}function $e(e,n){if(1&e){const a=t.RV6();t.j41(0,"td",14)(1,"button",15),t.EFF(2," Action "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",16,0)(7,"button",17),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.UpdateCategory(o.id))}),t.EFF(8," Edit "),t.k0s(),t.j41(9,"button",17),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.DeleteCategory(o.id))}),t.EFF(10," Delete "),t.k0s()()()}if(2&e){const a=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",a)}}function Ne(e,n){1&e&&(t.j41(0,"th",13),t.EFF(1," Category Name "),t.k0s())}function xe(e,n){if(1&e&&(t.j41(0,"td",14),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.name," ")}}function Ie(e,n){1&e&&t.nrm(0,"tr",18)}function Ae(e,n){1&e&&t.nrm(0,"tr",19)}let Ge=(()=>{class e{constructor(a,s,o,i,d){this.repoService=a,this.dialog=s,this.toastr=o,this.dataService=i,this.dialogserve=d,this.displayedColumns=["action","category"],this.dataSource=new m.I6,this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getCategories()})}ngOnInit(){this.getCategories()}getCategories(){this.repoService.getData("api/categories").subscribe(a=>{this.dataSource.data=a},a=>{console.log(a)})}addCategory(){this.dialog.open(Te,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}UpdateCategory(a){this.dialog.open(we,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:a}})}DeleteCategory(a){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the category ?").afterClosed().subscribe(s=>{s&&this.repoService.delete(`api/categories/${a}`).subscribe(i=>{this.dialogserve.openSuccessDialog("The role has been deleted successfully.").afterClosed().subscribe(d=>{this.getCategories()})})})}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(_.bZ),t.rXU(R.tw),t.rXU(S),t.rXU(D.o))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-categories"]],decls:16,vars:3,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","category"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,o){1&s&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Categories"),t.k0s(),t.nrm(4,"span",3),t.k0s(),t.j41(5,"mat-card-content",4)(6,"div",5)(7,"table",6),t.qex(8,7),t.DNE(9,ye,2,0,"th",8)(10,$e,11,1,"td",9),t.bVm(),t.qex(11,10),t.DNE(12,Ne,2,0,"th",8)(13,xe,2,1,"td",9),t.bVm(),t.DNE(14,Ie,1,0,"tr",11)(15,Ae,1,0,"tr",12),t.k0s()()()()),2&s&&(t.R7$(7),t.Y8G("dataSource",o.dataSource),t.R7$(7),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns))},dependencies:[E.kk,E.fb,E.Cp,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB],encapsulation:2})}return e})(),Me=(()=>{class e{constructor(a,s,o,i,d){this.repoService=a,this.toastr=s,this.dataService=o,this.dialogserve=i,this.Ref=d,this.validateControl=p=>this.dataForm?.get(p)?.invalid&&this.dataForm?.get(p)?.touched,this.hasError=(p,l)=>this.dataForm?.get(p)?.hasError(l),this.createData=p=>{this.dataForm.valid&&this.executeDataCreation(p)},this.executeDataCreation=p=>{this.repoService.create("api/permissions",{name:p.name}).subscribe(h=>{this.dialogserve.openSuccessDialog("The role has been added successfully.").afterClosed().subscribe(b=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},h=>{this.toastr.error(h),this.Ref.close([])})}}ngOnInit(){this.dataForm=new r.gE({name:new r.MJ("",[r.k0.required,r.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(R.tw),t.rXU(S),t.rXU(D.o),t.rXU(_.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-add-permission"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,o){1&s&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return o.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return o.createData(o.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&s&&(t.R7$(9),t.Y8G("formGroup",o.dataForm),t.R7$(5),t.Y8G("disabled",!o.dataForm.valid))},dependencies:[f.rl,f.nJ,j.fg,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}return e})(),Xe=(()=>{class e{constructor(a,s,o,i,d,p){this.repoService=a,this.toastr=s,this.dataService=o,this.dialogserve=i,this.data=d,this.Ref=p,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,u)=>this.dataForm?.get(l)?.hasError(u),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.update(`api/permissions/${this.result.id}`,{name:l.name}).subscribe(k=>{this.dialogserve.openSuccessDialog("The role has been updated successfully.").afterClosed().subscribe($=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},k=>{this.toastr.error(k),this.Ref.close([])})},this.getRoletoUpdate=()=>{const u=`api/permissions/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:h=>{this.role={...h},this.dataForm.patchValue(this.role)},error:h=>{this.toastr.success(h)}})}}ngOnInit(){this.dataForm=new r.gE({name:new r.MJ("",[r.k0.required,r.k0.maxLength(60)])}),this.result=this.data,this.getRoletoUpdate()}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(R.tw),t.rXU(S),t.rXU(D.o),t.rXU(_.Vh),t.rXU(_.CP))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-update-permission"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,o){1&s&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Update role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return o.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return o.createData(o.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&s&&(t.R7$(9),t.Y8G("formGroup",o.dataForm),t.R7$(5),t.Y8G("disabled",!o.dataForm.valid))},dependencies:[f.rl,f.nJ,j.fg,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}return e})();function Pe(e,n){1&e&&(t.j41(0,"th",14),t.EFF(1," Action "),t.k0s())}function Be(e,n){if(1&e){const a=t.RV6();t.j41(0,"td",15)(1,"button",16),t.EFF(2," Action "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",17,0)(7,"button",18),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.UpdatePermission(o.id))}),t.EFF(8," Edit "),t.k0s(),t.j41(9,"button",18),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.DeletePermission(o.id))}),t.EFF(10," Delete "),t.k0s()()()}if(2&e){const a=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",a)}}function Ye(e,n){1&e&&(t.j41(0,"th",14),t.EFF(1," Category Name "),t.k0s())}function Ve(e,n){if(1&e&&(t.j41(0,"td",15),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.name," ")}}function Oe(e,n){1&e&&t.nrm(0,"tr",19)}function Le(e,n){1&e&&t.nrm(0,"tr",20)}let Je=(()=>{class e{constructor(a,s,o,i,d){this.repoService=a,this.dialog=s,this.toastr=o,this.dataService=i,this.dialogserve=d,this.displayedColumns=["action","permission"],this.dataSource=new m.I6,this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getCategories()})}ngOnInit(){this.getCategories()}getCategories(){this.repoService.getData("api/permissions").subscribe(a=>{this.dataSource.data=a},a=>{console.log(a)})}addPermission(){this.dialog.open(Me,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}UpdatePermission(a){this.dialog.open(Xe,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:a}})}DeletePermission(a){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the Permission ?").afterClosed().subscribe(s=>{s&&this.repoService.delete(`api/permissions/${a}`).subscribe(i=>{this.dialogserve.openSuccessDialog("The role has been deleted successfully.").afterClosed().subscribe(d=>{this.getCategories()})})})}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(_.bZ),t.rXU(R.tw),t.rXU(S),t.rXU(D.o))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-permissions"]],decls:20,vars:3,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","permission"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,o){1&s&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"User roles"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return o.addPermission()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.EFF(8,"Create new category "),t.k0s()(),t.j41(9,"mat-card-content",5)(10,"div",6)(11,"table",7),t.qex(12,8),t.DNE(13,Pe,2,0,"th",9)(14,Be,11,1,"td",10),t.bVm(),t.qex(15,11),t.DNE(16,Ye,2,0,"th",9)(17,Ve,2,1,"td",10),t.bVm(),t.DNE(18,Oe,1,0,"tr",12)(19,Le,1,0,"tr",13),t.k0s()()()()),2&s&&(t.R7$(11),t.Y8G("dataSource",o.dataSource),t.R7$(7),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns))},dependencies:[E.kk,E.fb,E.Cp,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB],encapsulation:2})}return e})();function qe(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1,"Name is required"),t.k0s())}function He(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1,"User Name is required"),t.k0s())}let ze=(()=>{class e{constructor(a,s,o,i,d,p){this.formBuilder=a,this.Ref=s,this.repoService=o,this.toastr=i,this.dialogserve=d,this.dataService=p,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,u)=>this.dataForm?.get(l)?.hasError(u),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.create("api/usercalendars",{name:l.name,userName:l.userName}).subscribe(b=>{this.dialogserve.openSuccessDialog("The calendar has been added successfully.").afterClosed().subscribe(k=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},b=>{this.toastr.error(b),this.Ref.close([])})}}ngOnInit(){this.dataForm=this.formBuilder.group({name:["",[r.k0.required]],userName:["",[r.k0.required]]})}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(r.ok),t.rXU(_.CP),t.rXU(C.U),t.rXU(R.tw),t.rXU(D.o),t.rXU(S))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-add-user-calendar"]],decls:21,vars:4,consts:[["mat-dialog-title",""],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],[1,"form-group"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Name","formControlName","name"],[4,"ngIf"],["matInput","","type","text","placeholder","User Name","formControlName","userName"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(s,o){1&s&&(t.j41(0,"h2",0),t.EFF(1,"Add New Calendar"),t.k0s(),t.j41(2,"form",1),t.bIt("ngSubmit",function(){return o.createData(o.dataForm.value)}),t.j41(3,"mat-dialog-content")(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t.EFF(7,"Name"),t.k0s(),t.nrm(8,"input",4),t.DNE(9,qe,2,0,"mat-error",5),t.k0s()(),t.j41(10,"div",2)(11,"mat-form-field",3)(12,"mat-label"),t.EFF(13,"User Name"),t.k0s(),t.nrm(14,"input",6),t.DNE(15,He,2,0,"mat-error",5),t.k0s()()(),t.j41(16,"mat-dialog-actions",7)(17,"button",8),t.bIt("click",function(){return o.closeModal()}),t.EFF(18,"Cancel"),t.k0s(),t.j41(19,"button",9),t.EFF(20,"Save"),t.k0s()()()),2&s&&(t.R7$(2),t.Y8G("formGroup",o.dataForm),t.R7$(7),t.Y8G("ngIf",o.hasError("name","required")),t.R7$(6),t.Y8G("ngIf",o.hasError("userName","required")),t.R7$(4),t.Y8G("disabled",!o.dataForm.valid))},dependencies:[U.bT,f.rl,f.nJ,f.TL,j.fg,F.$z,_.BI,_.Yi,_.E7,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}return e})();function Ke(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1,"Name is required"),t.k0s())}function We(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1,"User Name is required"),t.k0s())}let Ze=(()=>{class e{constructor(a,s,o,i,d,p,l){this.formBuilder=a,this.Ref=s,this.result=o,this.repoService=i,this.toastr=d,this.dialogserve=p,this.dataService=l,this.validateControl=u=>this.dataForm?.get(u)?.invalid&&this.dataForm?.get(u)?.touched,this.hasError=(u,h)=>this.dataForm?.get(u)?.hasError(h),this.createData=u=>{this.dataForm.valid&&this.executeDataCreation(u)},this.executeDataCreation=u=>{this.repoService.update(`api/usercalendars/${this.result.id}`,{name:u.name,userName:u.userName}).subscribe($=>{this.dialogserve.openSuccessDialog("The calendar has been updated successfully.").afterClosed().subscribe(ya=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},$=>{this.toastr.error($),this.Ref.close([])})},this.getUserCalendarToUpdate=()=>{this.repoService.getData(`api/usercalendars/${this.result.id}`).subscribe({next:b=>{this.userCalendar={...b},this.dataForm.patchValue(this.userCalendar)},error:b=>{this.toastr.error(b)}})}}ngOnInit(){this.dataForm=this.formBuilder.group({name:["",[r.k0.required]],userName:["",[r.k0.required]]}),this.getUserCalendarToUpdate()}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(r.ok),t.rXU(_.CP),t.rXU(_.Vh),t.rXU(C.U),t.rXU(R.tw),t.rXU(D.o),t.rXU(S))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-update-user-calendar"]],decls:21,vars:4,consts:[["mat-dialog-title",""],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],[1,"form-group"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Name","formControlName","name"],[4,"ngIf"],["matInput","","type","text","placeholder","User Name","formControlName","userName"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(s,o){1&s&&(t.j41(0,"h2",0),t.EFF(1,"Update Calendar"),t.k0s(),t.j41(2,"form",1),t.bIt("ngSubmit",function(){return o.createData(o.dataForm.value)}),t.j41(3,"mat-dialog-content")(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t.EFF(7,"Name"),t.k0s(),t.nrm(8,"input",4),t.DNE(9,Ke,2,0,"mat-error",5),t.k0s()(),t.j41(10,"div",2)(11,"mat-form-field",3)(12,"mat-label"),t.EFF(13,"User Name"),t.k0s(),t.nrm(14,"input",6),t.DNE(15,We,2,0,"mat-error",5),t.k0s()()(),t.j41(16,"mat-dialog-actions",7)(17,"button",8),t.bIt("click",function(){return o.closeModal()}),t.EFF(18,"Cancel"),t.k0s(),t.j41(19,"button",9),t.EFF(20,"Update"),t.k0s()()()),2&s&&(t.R7$(2),t.Y8G("formGroup",o.dataForm),t.R7$(7),t.Y8G("ngIf",o.hasError("name","required")),t.R7$(6),t.Y8G("ngIf",o.hasError("userName","required")),t.R7$(4),t.Y8G("disabled",!o.dataForm.valid))},dependencies:[U.bT,f.rl,f.nJ,f.TL,j.fg,F.$z,_.BI,_.Yi,_.E7,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}return e})();const Qe=()=>[5,10,15];function ta(e,n){1&e&&(t.j41(0,"th",20),t.EFF(1," Action "),t.k0s())}function ea(e,n){if(1&e){const a=t.RV6();t.j41(0,"td",21)(1,"button",22),t.EFF(2," Action"),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",23,0)(7,"button",24),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.updateUserCalendar(o.id))}),t.EFF(8," Edit "),t.k0s(),t.j41(9,"button",24),t.bIt("click",function(){const o=t.eBV(a).$implicit,i=t.XpG();return t.Njj(i.deleteUserCalendar(o.id))}),t.EFF(10," Delete "),t.k0s()()()}if(2&e){const a=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",a)}}function aa(e,n){1&e&&(t.j41(0,"th",25),t.EFF(1," Name "),t.k0s())}function oa(e,n){if(1&e&&(t.j41(0,"td",21),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.name," ")}}function sa(e,n){1&e&&(t.j41(0,"th",25),t.EFF(1," User Name "),t.k0s())}function ia(e,n){if(1&e&&(t.j41(0,"td",21),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.userName," ")}}function ra(e,n){1&e&&t.nrm(0,"tr",26)}function na(e,n){1&e&&t.nrm(0,"tr",27)}let la=(()=>{class e{constructor(a,s,o,i,d){this.repoService=a,this.dialog=s,this.toastr=o,this.dataService=i,this.dialogserve=d,this.displayedColumns=["action","name","userName"],this.dataSource=new m.I6,this.doFilter=p=>{this.dataSource.filter=p.trim().toLocaleLowerCase()},this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getUserCalendars()})}ngOnInit(){this.getUserCalendars()}getUserCalendars(){this.repoService.getData("api/usercalendars").subscribe(a=>{this.dataSource.data=a},a=>{console.log(a)})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}addUserCalendar(){this.dialog.open(ze,{width:"500px",height:"300px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateUserCalendar(a){this.dialog.open(Ze,{width:"500px",height:"300px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:a}})}deleteUserCalendar(a){this.dialogserve.openConfirmDialog("Are you sure you want to delete this calendar?").afterClosed().subscribe(s=>{s&&this.repoService.delete(`api/usercalendars/${a}`).subscribe(i=>{this.dialogserve.openSuccessDialog("The calendar has been deleted successfully.").afterClosed().subscribe(d=>{this.getUserCalendars()})})})}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(_.bZ),t.rXU(R.tw),t.rXU(S),t.rXU(D.o))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-user-calendars"]],viewQuery:function(s,o){if(1&s&&(t.GBs(T.iy,5),t.GBs(w.B4,5)),2&s){let i;t.mGM(i=t.lsd())&&(o.paginator=i.first),t.mGM(i=t.lsd())&&(o.sort=i.first)}},decls:27,vars:5,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search....",3,"keyup"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","userName"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-header-row",""],["mat-row",""]],template:function(s,o){1&s&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"User Calendars"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return o.addUserCalendar()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.j41(8,"span",5),t.EFF(9,"Create new calendar"),t.k0s()()(),t.j41(10,"mat-card-content",6)(11,"div",7)(12,"mat-form-field",8)(13,"input",9),t.bIt("keyup",function(d){return o.doFilter(d.target.value)}),t.k0s()(),t.j41(14,"table",10),t.qex(15,11),t.DNE(16,ta,2,0,"th",12)(17,ea,11,1,"td",13),t.bVm(),t.qex(18,14),t.DNE(19,aa,2,0,"th",15)(20,oa,2,1,"td",13),t.bVm(),t.qex(21,16),t.DNE(22,sa,2,0,"th",15)(23,ia,2,1,"td",13),t.bVm(),t.DNE(24,ra,1,0,"tr",17)(25,na,1,0,"tr",18),t.k0s(),t.nrm(26,"mat-paginator",19),t.k0s()()()),2&s&&(t.R7$(14),t.Y8G("dataSource",o.dataSource),t.R7$(10),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns),t.R7$(),t.Y8G("pageSizeOptions",t.lJ4(4,Qe)))},dependencies:[f.rl,j.fg,E.kk,E.fb,E.Cp,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,T.iy,w.B4,w.aE,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,N.Om],encapsulation:2})}return e})();var ma=g(8359);const ca=()=>[5,10,15,20],da=(e,n)=>({"text-success":e,"text-danger":n});function pa(e,n){1&e&&(t.j41(0,"th",32),t.EFF(1,"User"),t.k0s())}function ua(e,n){if(1&e&&(t.j41(0,"td",33),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.JRh(a.userName)}}function ha(e,n){1&e&&(t.j41(0,"th",32),t.EFF(1,"Small"),t.k0s())}function fa(e,n){if(1&e&&(t.j41(0,"td",33),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.JRh(a.smallOrders)}}function _a(e,n){1&e&&(t.j41(0,"th",32),t.EFF(1,"Medium"),t.k0s())}function ga(e,n){if(1&e&&(t.j41(0,"td",33),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.JRh(a.mediumOrders)}}function ba(e,n){1&e&&(t.j41(0,"th",32),t.EFF(1,"Large"),t.k0s())}function Ca(e,n){if(1&e&&(t.j41(0,"td",33),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.JRh(a.largeOrders)}}function Fa(e,n){1&e&&(t.j41(0,"th",32),t.EFF(1,"Rating"),t.k0s())}function ka(e,n){if(1&e&&(t.j41(0,"td",33),t.EFF(1),t.k0s()),2&e){const a=n.$implicit;t.R7$(),t.SpI(" ",a.averageStars," ")}}function Da(e,n){1&e&&(t.j41(0,"th",32),t.EFF(1,"Reward"),t.k0s())}function Ra(e,n){if(1&e&&(t.j41(0,"td",34),t.EFF(1),t.k0s()),2&e){const a=n.$implicit,s=t.XpG();t.Y8G("ngClass",t.l_i(2,da,a.rewardOrPenalty>0,a.rewardOrPenalty<0)),t.R7$(),t.SpI(" ",s.formatCurrency(a.rewardOrPenalty)," ")}}function va(e,n){1&e&&t.nrm(0,"tr",35)}function Sa(e,n){1&e&&t.nrm(0,"tr",36)}const Ua=[{path:"",children:[{path:"lists",component:gt},{path:"users",component:Ot},{path:"roles",component:ue},{path:"categories",component:Ge},{path:"permissions",component:Je},{path:"audits",component:Se},{path:"customer-details/:id",component:je},{path:"user-calendars",component:la},{path:"kpi-report",component:(()=>{class e{constructor(a,s,o,i){this.repoService=a,this.toastr=s,this.datePipe=o,this.dialogServe=i,this.displayedColumns=["userName","smallOrders","mediumOrders","largeOrders","averageStars","rewardOrPenalty"],this.dataSource=new m.I6,this.startDate=new Date,this.endDate=new Date,this.subscriptions=new ma.yU,this.doFilter=d=>{this.dataSource.filter=d.trim().toLocaleLowerCase()}}ngOnInit(){const a=new Date,s=a.getMonth(),o=a.getFullYear();this.startDate=new Date(o,s-1,21),this.endDate=new Date(o,s,20),this.getKpiReport()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnDestroy(){this.subscriptions.unsubscribe()}getKpiReport(){if(!this.startDate||!this.endDate)return void this.dialogServe.openErrorDialog("Please provide valid date range");const a=this.formatDate(this.startDate),s=this.formatDate(this.endDate);this.startDate>this.endDate?this.dialogServe.openErrorDialog("Start date must be less than or equal to end date."):this.repoService.getData(`api/calendar-report/kpi-summary?startDate=${a}&endDate=${s}`).subscribe({next:i=>{this.dataSource.data=i,0===this.dataSource.data.length&&this.toastr.info("No data found for the selected date range")},error:i=>{this.handleError("KPI report",i)}})}formatDate(a){return this.datePipe.transform(a,"yyyy/MM/dd")||""}formatCurrency(a){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(a)}getStarRating(a){const s=Math.floor(a),o=a%1>=.5;let i="";for(let d=0;d<s;d++)i+="\u2605";return o&&(i+="\xbd"),i}onSubmit(){this.getKpiReport()}exportKpiReport(){if(!this.startDate||!this.endDate)return void this.dialogServe.openErrorDialog("Please provide valid date range");const a=this.formatDate(this.startDate),s=this.formatDate(this.endDate);this.startDate>this.endDate?this.dialogServe.openErrorDialog("Start date must be less than or equal to end date."):this.repoService.exportReport("api/calendar-report/export",{startDate:a,endDate:s}).subscribe({next:i=>{i&&i.size>0?this.downloadFile(i,`KPI_Report_${this.formatDateForFileName(this.startDate)}_${this.formatDateForFileName(this.endDate)}.xlsx`):this.dialogServe.openErrorDialog("No data to export")},error:i=>{this.handleError("exporting KPI report",i)}})}formatDateForFileName(a){return`${String(a.getDate()).padStart(2,"0")}${String(a.getMonth()+1).padStart(2,"0")}${a.getFullYear()}`}downloadFile(a,s){const o=window.URL.createObjectURL(a),i=document.createElement("a");i.href=o,i.download=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)}handleError(a,s){console.error(`Error with ${a}:`,s),this.toastr.error(`Error with ${a}: ${s.message||"Unknown error"}`)}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(C.U),t.rXU(R.tw),t.rXU(U.vh),t.rXU(D.o))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-kpi-report"]],viewQuery:function(s,o){if(1&s&&(t.GBs(T.iy,5),t.GBs(w.B4,5)),2&s){let i;t.mGM(i=t.lsd())&&(o.paginator=i.first),t.mGM(i=t.lsd())&&(o.sort=i.first)}},features:[t.Jv_([U.vh])],decls:60,vars:12,consts:[["startPicker",""],["endPicker",""],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],[1,"b-t-1"],[1,"filters","m-t-16","m-b-16"],[1,"row","g-3"],[1,"col-12","col-md-6","col-lg-6"],["appearance","outline",1,"filter-field","w-100"],["matInput","",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],[1,"row","g-3","mt-2"],[1,"col-12","col-md-6"],["mat-flat-button","","color","primary",1,"filter-button","w-100",3,"click"],["mat-flat-button","","color","accent",1,"filter-button","w-100",3,"click"],[1,"table-responsive","m-t-16"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search...",3,"keyup"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","userName"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","smallOrders"],["matColumnDef","mediumOrders"],["matColumnDef","largeOrders"],["matColumnDef","averageStars"],["matColumnDef","rewardOrPenalty"],["mat-cell","","class","mat-body-1",3,"ngClass",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-cell","",1,"mat-body-1",3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(s,o){if(1&s){const i=t.RV6();t.j41(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title",3),t.EFF(3,"KPI Report"),t.k0s(),t.nrm(4,"span",4),t.k0s(),t.j41(5,"mat-card-content",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"mat-form-field",9)(10,"mat-label"),t.EFF(11,"Start Date"),t.k0s(),t.j41(12,"input",10),t.mxI("ngModelChange",function(p){return t.eBV(i),t.DH7(o.startDate,p)||(o.startDate=p),t.Njj(p)}),t.k0s(),t.nrm(13,"mat-datepicker-toggle",11)(14,"mat-datepicker",null,0),t.k0s()(),t.j41(16,"div",8)(17,"mat-form-field",9)(18,"mat-label"),t.EFF(19,"End Date"),t.k0s(),t.j41(20,"input",10),t.mxI("ngModelChange",function(p){return t.eBV(i),t.DH7(o.endDate,p)||(o.endDate=p),t.Njj(p)}),t.k0s(),t.nrm(21,"mat-datepicker-toggle",11)(22,"mat-datepicker",null,1),t.k0s()()(),t.j41(24,"div",12)(25,"div",13)(26,"button",14),t.bIt("click",function(){return t.eBV(i),t.Njj(o.onSubmit())}),t.j41(27,"mat-icon"),t.EFF(28,"search"),t.k0s(),t.EFF(29," Generate Report "),t.k0s()(),t.j41(30,"div",13)(31,"button",15),t.bIt("click",function(){return t.eBV(i),t.Njj(o.exportKpiReport())}),t.j41(32,"mat-icon"),t.EFF(33,"file_download"),t.k0s(),t.EFF(34," Export "),t.k0s()()()(),t.j41(35,"div",16)(36,"mat-form-field",17)(37,"input",18),t.bIt("keyup",function(p){return t.eBV(i),t.Njj(o.doFilter(p.target.value))}),t.k0s()(),t.j41(38,"table",19),t.qex(39,20),t.DNE(40,pa,2,0,"th",21)(41,ua,2,1,"td",22),t.bVm(),t.qex(42,23),t.DNE(43,ha,2,0,"th",21)(44,fa,2,1,"td",22),t.bVm(),t.qex(45,24),t.DNE(46,_a,2,0,"th",21)(47,ga,2,1,"td",22),t.bVm(),t.qex(48,25),t.DNE(49,ba,2,0,"th",21)(50,Ca,2,1,"td",22),t.bVm(),t.qex(51,26),t.DNE(52,Fa,2,0,"th",21)(53,ka,2,1,"td",22),t.bVm(),t.qex(54,27),t.DNE(55,Da,2,0,"th",21)(56,Ra,2,5,"td",28),t.bVm(),t.DNE(57,va,1,0,"tr",29)(58,Sa,1,0,"tr",30),t.k0s()(),t.nrm(59,"mat-paginator",31),t.k0s()()}if(2&s){const i=t.sdS(15),d=t.sdS(23);t.R7$(12),t.Y8G("matDatepicker",i),t.R50("ngModel",o.startDate),t.R7$(),t.Y8G("for",i),t.R7$(7),t.Y8G("matDatepicker",d),t.R50("ngModel",o.endDate),t.R7$(),t.Y8G("for",d),t.R7$(17),t.Y8G("dataSource",o.dataSource),t.R7$(19),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns),t.R7$(),t.Y8G("pageSize",10)("pageSizeOptions",t.lJ4(11,ca))}},dependencies:[U.YU,y.Vh,y.bZ,y.bU,f.rl,f.nJ,f.yw,j.fg,c.RN,c.m2,c.MM,c.dh,F.$z,v.An,T.iy,w.B4,w.aE,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,N.PW,r.me,r.BC,r.vS]})}return e})()}]}];var Ea=g(5230);let ja=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.$C({type:e});static#a=this.\u0275inj=t.G2t({imports:[U.MD,x.iI.forChild(Ua),M.G,r.YN,r.X1,X.X.pick(P),Ea.WX,R._B.forRoot({timeOut:3e3,positionClass:"toast-top-right",preventDuplicates:!0,progressBar:!0,closeButton:!0})]})}return e})()}}]);